name: Cypress Tests
on:
 push:
  branches: [ main, develop ]
 pull_request:
  branches: [ main ]
jobs:
 cypress-run:
  runs-on: ubuntu-latest
  strategy:
   matrix:
    node-version: [18.x]
  steps:
   - name: Checkout code
     uses: actions/checkout@v4
   - name: Setup Node.js
     uses: actions/setup-node@v4
     with:
      node-version: 20
      cache: 'npm'
   - name: Install dependencies
     run: npm ci
   - name: Run Cypress tests
     run: npx cypress run --spec "cypress/e2e/lab1_1.cy.js" --browser chrome --headless
   - name: Generate HTML report
     run: |

   - name: Upload test artifacts
     uses: actions/upload-artifact@v4
     with:
      name: cypress-results
      path: |
       cypress/screenshots
       cypress/videos
       cypress/reports
      if-no-files-found: warn
      compression-level: 6
      overwrite: false
      include-hidden-files: false

